java_test(name = "test",
  srcs = [
    "CreateIPhoneDriverTest.java",
    "IPhoneDriverTestSuite.java",
    "IPhoneSimulatorCommandExecutorTest.java",
  ],
  deps = [
    ":server",
    "//java/client/test/org/openqa/selenium:tests",
    "//java/client/src/org/openqa/selenium/iphone:iphone",
    "//third_party/java/commons-exec",
  ],
  resources = [
    {"//third_party/objc/iphonesim:iphonesim-binary" : "mac/iphonesim"},
  ])

java_test(name = "test_deployed",
  srcs = [
    "AlreadyRunningIPhoneDriverTestSuite.java",
    "*Test.java",
  ],
  deps = [
    "//java/client/test/org/openqa/selenium:tests",
    "//java/client/src/org/openqa/selenium/iphone",
    "//third_party/java/junit",
  ])

rake_task(name = "server-tests",
  task_name = "test_iphone_server_tests",
  out = "iphone/build/Release-iphonesimulator/Tests.app")

rake_task(name = "server",
  task_name = "iphone_server",
  out = "iphone/build/Release-iphonesimulator/iWebDriver.app")
