#summary The release process for a new selenium

<wiki:toc depth=2>

= For Everything =

  # Gather feedback from other developers about the release: Define a time for the release, ask for release blockers and provide additional details that will help developers participate in the release process. This should be emailed to  'selenium-developers'. 
  # Bump the revision numbers at the top of the Rakefile.
  # Bump the revision number in "javascript/firefox-driver/extension/install.rdf"
  # Bump the revision number in "java/server/src/org/openqa/selenium/server/VERSION.txt" and "javascript/selenium-core/scripts/selenium-version.js"
  # Commit version number bump.
  # To find out the revision of the last release: `svn log http://selenium.googlecode.com/svn/tags --limit 1`

= For Java =

  # Run `./go clean release`
  # Upload the new versions of the ZIP files from "build/dist" to the downloads page. Alternatively, run `./go push_release` to have the artifacts uploaded for you.
  # Upload the new Android APK from build/android/app/android-server.apk to the downloads page.
  # Add a subversion tag: `svn copy https://selenium.googlecode.com/svn/trunk/ https://selenium.googlecode.com/svn/tags/selenium-2.<REVISION>` 
  # Update the docs. I do this on a UNIX variant:
    # `./go javadocs`
    # `find docs/api/java -name "*.html" | grep -v svn | xargs rm`
    # `cp -r build/javadoc/* docs/api/java`
    # `svn st docs/api/java | grep \! | awk '{print $2}' | xargs svn rm`
    # `svn st docs/api/java | grep \? | awk '{print $2}' | xargs svn add`
    # `find docs/api/java -name "*.html" | xargs svn ps "svn:mime-type" "text/html"`
    # Commit new docs
  # Update the Java CHANGELOG under `java/CHANGELOG`
  # Update the SeHQ downloads page with updated links, release numbers and dates


== Updating the Maven Repos ==

 # Prerequisite 1: Make sure Maven 2.2.1 and GnuPG are installed.
 # Prerequisite 2: Make sure your `~/.m2/settings.xml` contains the following lines in the `<servers>` section:
{{{
    <server>
        <id>sonatype-nexus-snapshots</id>
        <username>_your-username-for-oss.sonatype.org_</username>
        <password>_your-password_</password>
    </server>
    <server>
        <id>sonatype-nexus-staging</id>
        <username>_your-username-for-oss.sonatype.org_</username>
        <password>_your-password_</password>
    </server>
}}}
 # Prerequisite 3: Make sure your GnuPG public key is distributed to `hkp://pgp.mit.edu`
 # Make sure the dependencies in all pom.xml files under the maven directory are correct -- if not, update them (Hint: check for changes in the third_party directory)
 # Perform any manual steps/release hacks documented here:
   # To provide the correct version info in a WebDriverException you should also replace "unknown" in the maven/api/pom.xml with the Subversion commit number wich forked the version branch:
{{{
             <manifestEntries>
                 <Selenium-Version>${version}</Selenium-Version>
-                <Selenium-Revision>unknown</Selenium-Revision>
+                <Selenium-Revision>12345</Selenium-Revision>
                 <Selenium-Build-Time>${maven.build.timestamp}</Selenium-Build-Time>
             </manifestEntries>
}}} 
 # Update the version number in all pom.xml files under the maven directory (but do not check in those changes) (`mvn versions:set -DnewVersion=2.3.0` inside the "maven" folder)
 # Execute:
   # `./go //java/client/src/org/openqa/selenium:client-combined:project`
   # `./go //java/server/src/org/openqa/grid/selenium:selenium:project`
   # `cd maven`
   # `mvn -Dtest=skip -DfailIfNoTests=false install`
 # Execute:
   `mvn source:jar javadoc:jar -Dtest=skip -DfailIfNoTests=false -Dgpg.passphrase=_your-GnuPG-key-passphrase_ -Psign deploy`                
 # Goto http://oss.sonatype.org, log in, close the staging repository.
 # Test the artifacts, these are the _real_ files you will be irreversibly promoting to central. You can do this easily by cloning the repo at [https://github.com/krosenvold/selenium-release-test] and following the instructions there. (Once the staging repository has been closed you get the url to the repository by clicking on the repository. This url can be added to your project pom to test if you want to test using a different project. Remember that you may need to delete the artifacts in your local repository to make sure you re-download the staged artifacts).  
 # Promote that staged release in nexus (or drop it).
 # Make sure any other manual hacks you did are documented in step 5 or committed back on trunk.
 # Once the artifacts finally hit central (please wait till they are actually there), update the maven downloads page on SeHQ. If you can't wait don't update the page, someone will notice and update it.

= For .NET =

  # Verify the build number is correct in dotnet/build.desc
  # Run `go clean //dotnet:release`. Note that this will require you to have the [http://shfb.codeplex.com .NET documentation generation tools] installed.
  # Upload the selenium-dotnet-xx.zip file from build/dotnet to the downloads page.
  # Update the SeHQ downloads page with updated links, release numbers and dates

= For Ruby =

== selenium-webdriver ==

 # To release a new gem you will need to be registered as a gem owner on rubygems.org.
  # Bump the version number in rb/build.desc.
  # Update rb/CHANGES with a summary of changes since the last release.
  # Update docs: `rm -rf docs/api/rb && ./go //rb:docs` (you'll need the YARD gem installed)
  # Make sure the mime types are correct: 
    # `svn propset svn:mime-type text/html docs/api/rb/**/*.html`
    # `svn propset svn:mime-type application/javascript docs/api/rb/**/*.js`
    # `svn propset svn:mime-type text/css docs/api/rb/**/*.css`
  # Commit the changes.
  # `./go //rb:gem:release`
  # Bump version number in rb/build.desc to "X.X.X.dev" and commit the change.
  # Update the SeHQ downloads page with updated links, release numbers and dates

= For Python =
# To release a new version you need to be registered as a Owner/Maintener on pypi.python.org
 # Bump the version numbers
   # in setup.py 
   # in py/README
   # in py/selenium/__init__.py
   # in py/selenium/webdriver/__init__.py
   # in py/docs/source/index.rst

 # check that in.
 # manually edit setup.py and remove all lines with "test" in them
 # `./go py_release` ~ have your credentials stored in ~/.pypirc
 # Bump the version number to the next version with dev e.g. 2.(n+1).0 and commit changes
 # Update the SeHQ downloads page with updated links, release numbers and dates


= Areas to Improve =

  * We should really automate the version number bumps.